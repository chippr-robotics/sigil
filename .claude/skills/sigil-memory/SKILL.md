---
name: sigil:memory
description: Strategic Memory Optimization skill for resource-constrained knowledge management using OODA loops and Brier scoring. Provides true Logseq integration with floppy disk optimization frameworks for distributed sigil project coordination.
version: 2.1.0
allowed-tools: Read, Write, Edit, Bash, WebFetch
---

# Sigil Memory Management Skill

## Overview

**Sigil Memory Management** - Strategic memory optimization for resource-constrained environments using OODA loops and Brier scoring methodologies. Provides authentic Logseq integration with systematic frameworks for 1.44 MB floppy disk optimization.

**Core Capabilities**:
- **Resource-Constrained Optimization**: OODA loop memory management for floppy disk constraints
- **Strategic Intelligence Tiers**: Systematic value-based memory allocation
- **Brier Scoring Integration**: Predictive accuracy measurement for optimization decisions
- **True Logseq Integration**: Real API, MCP, and CLI interfaces (not file manipulation)
- **Distributed Coordination**: Sigil project knowledge graph management

**Real Integration Methods**:
- **HTTP API Server**: Direct interaction with Logseq's built-in API
- **MCP Server**: Model Context Protocol for seamless Claude-Logseq integration
- **Official CLI**: Automated graph operations via @logseq/cli
- **Block-based Operations**: True block structure manipulation

## Quick Start

### 1. Enable Logseq HTTP API

```bash
# First, enable HTTP API in Logseq desktop app:
# Settings → Features → "Enable HTTP APIs server"
~/.claude/skills/logseq/scripts/check-api.sh
```

### 2. Install MCP Integration (Recommended)

```bash
# Install mcp-logseq for direct Claude integration
~/.claude/skills/logseq/scripts/setup-mcp.sh
```

### 3. Or Use CLI Interface

```bash
# Install official logseq CLI
npm install -g @logseq/cli

# Set up authentication token
~/.claude/skills/logseq/scripts/setup-cli.sh
```

## Core Operations

### HTTP API Integration

**Direct graph interaction via Logseq's HTTP API**:

```bash
# Check API status
scripts/api-status.sh

# Create pages with proper block structure
scripts/create-page.sh --title "Strategic Analysis" --content "block content"

# Query graph data
scripts/query-graph.sh --query "[[Ralph Loop]]"

# Add blocks to existing pages
scripts/add-block.sh --page "Strategic Memory" --content "New insight"
```

### MCP Server Integration

**Seamless Claude-Logseq interaction**:

```bash
# Set up MCP server for direct integration
scripts/setup-mcp-server.sh

# Test MCP connection
scripts/test-mcp.sh

# Use MCP to manage pages directly from Claude
scripts/mcp-create-page.sh --title "Consolidated Learnings" --structured
```

### CLI Operations

**Automated graph operations**:

```bash
# Export graph data
scripts/export-graph.sh --format json --output strategic-export.json

# Append content to pages
scripts/append-content.sh --page "Strategic Memory" --content "New analysis"

# Query graph properties
scripts/query-properties.sh --property "iteration"
```

## Advanced Features

### Strategic Memory Management

**Specialized operations for strategic analysis**:

```bash
# Create strategic memory structure
scripts/setup-strategic-memory.sh --base-dir "/path/to/docs"

# Consolidate iteration learnings using real logseq queries
scripts/consolidate-iterations.sh --query-based

# Generate strategic insights from graph relationships
scripts/generate-insights.sh --focus "ralph_loop,community"
```

### Distributed Graph Coordination

**For sigil project distributed knowledge management**:

```bash
# Set up distributed graph sync
scripts/setup-distributed.sh --mother-node-url "http://mother-node:3001"

# Sync with remote graphs
scripts/sync-graphs.sh --remotes "strategic,technical,research"

# Create unified views across distributed graphs
scripts/create-unified-view.sh --sources "graph1,graph2" --output "consolidated"
```

### Graph Analysis & Intelligence

**Extract strategic intelligence using logseq's capabilities**:

```bash
# Analyze graph structure
scripts/analyze-graph.sh --focus relationships --output analytics.json

# Generate strategic reports
scripts/generate-report.sh --type strategic --timeframe "last_10_iterations"

# Track concept evolution
scripts/track-evolution.sh --concept "systematic_infiltration" --timeline
```

## Integration Workflows

### Complete Strategic Memory Setup

**End-to-end workflow for strategic analysis**:

```bash
# 1. Initialize logseq integration
scripts/init-integration.sh --method mcp --graph-path "/strategic/memory"

# 2. Import existing documents
scripts/import-documents.sh --source "/media/dontpanic/1112-15D8" --preserve-structure

# 3. Generate graph relationships
scripts/build-graph-relationships.sh --strategy semantic

# 4. Create strategic views
scripts/create-strategic-views.sh --templates "iteration,analysis,insights"
```

### Ongoing Knowledge Management

**Automated maintenance for living knowledge graphs**:

```bash
# Daily sync and analysis
scripts/daily-maintenance.sh --graph-id "strategic-memory"

# Weekly insights generation
scripts/weekly-insights.sh --focus "recent_learnings"

# Monthly optimization
scripts/monthly-optimization.sh --prune-orphans --rebuild-indexes
```

## Strategic Memory Optimization

### Resource-Constrained Memory Management

**OODA Loop + Brier Scoring for 1.44 MB Floppy Disk Optimization**:

```bash
# Analyze current memory usage and strategic value
scripts/analyze-strategic-memory.sh --constraint "1.44MB" --graph-path "/strategic/memory"

# Apply OODA loop memory optimization
scripts/memory-ooda-loop.sh --observe --orient --decide --act

# Implement tiered memory management
scripts/optimize-memory-tiers.sh --tier1-essential --tier2-compress --tier3-archive --tier4-remove

# Validate optimization with Brier scoring
scripts/validate-memory-optimization.sh --brier-target "0.20" --decision-tests 5
```

### Memory Optimization Framework

**Systematic approach to strategic intelligence preservation under resource constraints**:

#### TIER 1: Core Strategic Intelligence (40% allocation)
- Essential navigation hubs (MASTER_INDEX)
- Strategic pivot analysis (ralph_loop_strategic_memory)
- Methodology frameworks (MASTER_TECHNIQUES_GUIDE)
- Recent strategic completions (latest 3 Ralph Loop results)

#### TIER 2: Active Strategic Intelligence (35% allocation)
- Recent iteration summaries (compressed)
- Platform analysis (consolidated)
- Methodology documentation (optimized)
- Network intelligence (essential patterns)

#### TIER 3: Historical Intelligence (20% allocation)
- Early iteration patterns (summarized)
- Methodology evolution (compressed)
- Foundation learnings (pattern extraction)

#### TIER 4: Reference Material (5% allocation)
- Essential configurations only
- Non-regenerable references
- Critical setup examples

### OODA Loop Memory Management

**Systematic memory optimization using proven methodologies**:

```bash
# OBSERVE: Memory intelligence gathering
scripts/observe-memory-patterns.sh --usage-analysis --access-frequency --strategic-value

# ORIENT: Strategic memory analysis
scripts/orient-memory-strategy.sh --tier-classification --dependency-mapping --prediction-accuracy

# DECIDE: Memory allocation optimization
scripts/decide-memory-allocation.sh --tier-targets --compression-ratios --removal-candidates

# ACT: Implementation and validation
scripts/act-memory-optimization.sh --implement --validate --measure-effectiveness
```

### Brier Scoring for Memory Decisions

**Predictive accuracy measurement for optimization effectiveness**:

```bash
# Create memory optimization predictions
scripts/create-memory-predictions.sh --optimization-targets --effectiveness-estimates --confidence-levels

# Execute optimization with measurement
scripts/execute-measured-optimization.sh --track-predictions --calculate-brier-scores

# Validate strategic decision quality
scripts/validate-decision-quality.sh --optimized-memory --brier-target "0.25" --test-iterations 5

# Calibrate future optimization predictions
scripts/calibrate-optimization-predictions.sh --historical-accuracy --confidence-adjustment
```

### Strategic Memory Principles

**Core principles for resource-constrained strategic intelligence management**:

1. **Compound Learning Over Complete Records**: Preserve strategic patterns, compress tactical details
2. **Prediction Accuracy Over Historical Completeness**: Optimize for future decision quality using Brier scoring
3. **Cross-Reference Intelligence Over Individual Files**: Focus on relationship patterns and strategic nodes
4. **Methodology Frameworks Over Specific Examples**: Extract reusable strategic principles
5. **Strategic Evolution Patterns Over Chronological Completeness**: Preserve learning trajectories

### Memory Optimization Validation

**Systematic testing of optimization effectiveness**:

```bash
# Strategic decision test using optimized memory
scripts/test-strategic-decisions.sh --optimized-memory --decision-count 10 --brier-target 0.25

# Pattern recognition validation
scripts/test-pattern-recognition.sh --compressed-history --accuracy-target 85

# Operational continuity test
scripts/test-operational-continuity.sh --optimized-memory --full-iteration-execution

# Cross-reference integrity validation
scripts/test-cross-reference-integrity.sh --strategic-nodes --relationship-preservation
```

## Real Integration Examples

### 1. HTTP API Usage

```bash
# Create a page with structured blocks
curl -X POST http://localhost:3001/api/pages \
  -H "Authorization: Bearer $LOGSEQ_API_TOKEN" \
  -d '{
    "page": "Strategic Insight #42",
    "blocks": [
      {"content": "## Key Learning"},
      {"content": "Community-first strategy validation"},
      {"content": "### Evidence", "children": [
        {"content": "[[Moltbook]]: 53 karma, 4+ connections"},
        {"content": "[[DarkFi]]: 0 external engagement"}
      ]}
    ]
  }'
```

### 2. MCP Server Integration

```bash
# Using MCP to query and create content
echo '{
  "method": "create_page",
  "params": {
    "title": "Consolidated Strategic Learnings",
    "content": "{{query (and [[Ralph Loop]] [[success]])}}",
    "template": "strategic-analysis"
  }
}' | scripts/mcp-request.sh
```

### 3. CLI Automation

```bash
# Export specific analysis using official CLI
logseq export \
  --graph "strategic-memory" \
  --query "[[strategic analysis]]" \
  --format structured-md \
  --output consolidated-learnings.md
```

## Sigil Project Integration

### Distributed Knowledge Architecture

**Real distributed graph management**:

```bash
# Set up sigil mother node
scripts/setup-sigil-mother.sh \
  --strategic-graph "http://strategic:3001" \
  --technical-graph "http://technical:3001" \
  --research-graph "http://research:3001"

# Sync across distributed graphs
scripts/sigil-sync.sh --all-nodes --verify-crypto

# Generate unified strategic intelligence
scripts/unified-intelligence.sh --synthesis strategic+technical
```

### Cryptographic Verification

**Integrate with sigil project's cryptographic requirements**:

```bash
# Sign graph changes
scripts/sign-changes.sh --graph-id "strategic" --key-path "/sigil/keys"

# Verify graph integrity
scripts/verify-integrity.sh --all-graphs --signatures

# Distributed backup with crypto verification
scripts/crypto-backup.sh --distribute --verify-all
```

## Configuration

### HTTP API Setup

```bash
# Configure API authentication
cat > ~/.logseq/api-config.json << EOF
{
  "server": "http://localhost:3001",
  "token": "$LOGSEQ_API_TOKEN",
  "graph": "strategic-memory"
}
EOF
```

### MCP Server Setup

```bash
# Install and configure MCP server
git clone https://github.com/ergut/mcp-logseq.git
cd mcp-logseq
npm install
npm start -- --graph-path "/strategic/memory"
```

## Best Practices

### Real Block Structure

**Use logseq's actual block-based approach**:

```
- # Strategic Analysis
  id:: strategic-analysis-001
  - ## Key Insight
    - **Community-first strategy** validation
      - Evidence: [[Moltbook]] success metrics
      - Comparison: [[DarkFi]] engagement failure
  - ## Implementation
    - {{query (property :iteration)}}
    - Links: [[systematic_infiltration]], [[relationship_building]]
```

### Proper Relationship Building

**Let logseq's graph discovery work naturally**:
- Use block references `((block-id))` for precise linking
- Create structured queries for pattern discovery
- Leverage logseq's graph database for relationship analysis

### Strategic Intelligence Extraction

**Use logseq's query system for insights**:
- `{{query (and [[Ralph Loop]] [[success metrics]]))}}`
- `{{query (property :strategic-priority "high")}}`
- `{{query (between [[iteration_1]] [[iteration_19]])}}"`

## Helper Scripts Reference

### API Integration
- `check-api.sh` - Verify HTTP API connectivity
- `api-request.sh` - Make authenticated API calls
- `create-page.sh` - Create pages via API
- `query-graph.sh` - Query graph data

### MCP Integration
- `setup-mcp.sh` - Install and configure MCP server
- `mcp-request.sh` - Send MCP requests
- `test-mcp.sh` - Test MCP connectivity

### CLI Operations
- `setup-cli.sh` - Configure official CLI
- `export-graph.sh` - Export graph data
- `append-content.sh` - Add content to pages

### Strategic Memory
- `consolidate-iterations.sh` - Real iteration analysis using logseq queries
- `generate-insights.sh` - Strategic intelligence extraction
- `setup-strategic-memory.sh` - Strategic graph initialization

### Sigil Integration
- `setup-sigil-mother.sh` - Distributed graph coordination
- `sigil-sync.sh` - Cross-graph synchronization
- `crypto-backup.sh` - Cryptographic backup management

### Memory Optimization
- `analyze-strategic-memory.sh` - Memory usage and strategic value analysis
- `memory-ooda-loop.sh` - OODA loop memory optimization framework
- `optimize-memory-tiers.sh` - Tiered memory management implementation
- `validate-memory-optimization.sh` - Brier scoring for optimization effectiveness
- `create-memory-predictions.sh` - Strategic memory optimization predictions
- `execute-measured-optimization.sh` - Prediction-tracked optimization execution
- `test-strategic-decisions.sh` - Strategic decision quality validation
- `calibrate-optimization-predictions.sh` - Brier score calibration for predictions

All scripts provide real logseq integration, not file manipulation.

---

**TRUE LOGSEQ INTEGRATION FOR STRATEGIC INTELLIGENCE AND DISTRIBUTED KNOWLEDGE MANAGEMENT**

Sources:
- [mcp-logseq MCP server](https://github.com/ergut/mcp-logseq)
- [@logseq/cli official CLI](https://www.npmjs.com/package/@logseq/cli)
- [Logseq API integration](https://github.com/eefahd/logseq-integrate-any-api)
- [HTTP API server setup](https://discuss.logseq.com/t/headless-logseq-on-a-self-hosted-server-and-add-edit-data-using-api/27855)